% ARH/AL March 2014. Code to process data from Anna's project looking at the effect of% gaze-contingent filtering on search strategies.% Data recorded from EyeLink 1000.% open the .asc file, get fixation and trial data, output to two separate% files for Alasdair.clear all;numSub = 12;filetomake = input('name the fixation results file: ', 's');F2ID = fopen(filetomake, 'a');fprintf(F2ID, 'condition\t subNum\t trialNo\t fixNo\t xFix\t xFixFlip\t yFix\t targSide\t easySide\t accuracy\t RT\n');for subNo=1:numSub            condition = 'tex';              filetoread = strcat(condition, num2str(subNo),'.asc'); % name of search data file to read        if (fopen(filetoread, 'r')~=-1)            FID=fopen(filetoread, 'r');            trialRunning = 0;            endtrialRun = 0;            trialCount = 0;            sacOnTime = 0;            numFix = 0;            targSide = 'x';            easySide = 'x';            fileRun = 1;            s=0;            xPos=zeros(1,70);            yPos=zeros(1,70);            RT=0;            efix =0;                        while fileRun                line=fgetl(FID); %get the next line of data                                if line == -1  % if the end of the file has been reached                    fclose(FID);                    fileRun = 0; %leave the main loop                    break;                end                                if findstr(line, 'TRIAL_START')                    numFix = 0;                    trialCount = trialCount+1;                         s=1;                    xPos=zeros(1,70);                    xPosFlip=zeros(1,70);                    yPos=zeros(1,70);                    targSide = 'x';                    easySide = 'x';                    trialRunning =1; %start loop to get timing / saccade info from trial;                    RT=0;                end                                if strfind(line, 'EASY_');                    easySide = line(strfind(line, '_')+1:length(line));                end                                if strfind(line, 'TARGET_')                     targSide = line(strfind(line, '_')+1:length(line))                end                                if findstr(line, 'EFIX')                     efix = str2num(line(10:length(line)));                    numFix= numFix+1;                    xPos(1,numFix)=round(efix(4));                    xPosFlip(1,numFix)=xPos(1,numFix)-960;                    yPos(1,numFix)=round(efix(5));                    fixStartT(1,numFix)=round(efix(1));                    fixEndT(1,numFix)=round(efix(2));                end                                               if strfind(line, 'ACCURACY_')                    accuracy =str2num(line(strfind(line, 'ACCURACY_')+9:length(line)));                end                if findstr(line, 'RT_')                    RT =str2num(line(strfind(line, 'RT_')+3:length(line)));                   if trialCount>16                      for s=1:numFix                          comp=strcmp(easySide,'left');                                if comp==1                                   xPosFlip(1,s)=xPosFlip(1,s)*(-1);                                end                    fprintf(F2ID, '%s\t %d\t %d\t %d\t %d\t %d\t %d\t %s\t %s\t %d\t %2.3f\n',condition, subNo,trialCount, s, round(xPos(1,s)),round(xPosFlip(1,s)), round(yPos(1,s)), targSide, easySide,accuracy,RT);                      end                   end                end            end        end       end   fclose(F2ID);                                                                                 